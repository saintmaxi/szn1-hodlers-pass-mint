import{t as be,e as se}from"./tslib.14bae208.js";import{g as A,k as Ee}from"./index.560c83b6.js";var V=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var s=0,a=e.length,i;s<a;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))},Oe=function(){function t(e,n,s){this.name=e,this.version=n,this.os=s,this.type="browser"}return t}(),Re=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),_e=function(){function t(e,n,s,a){this.name=e,this.version=n,this.os=s,this.bot=a,this.type="bot-device"}return t}(),Te=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ae=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Se=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Be=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,q=3,Pe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Se]],X=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function It(t){return t?G(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ae:typeof navigator<"u"?G(navigator.userAgent):De()}function Ce(t){return t!==""&&Pe.reduce(function(e,n){var s=n[0],a=n[1];if(e)return e;var i=a.exec(t);return!!i&&[s,i]},!1)}function G(t){var e=Ce(t);if(!e)return null;var n=e[0],s=e[1];if(n==="searchbot")return new Te;var a=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);a?a.length<q&&(a=V(V([],a,!0),Me(q-a.length),!0)):a=[];var i=a.join("."),u=xe(t),l=Be.exec(t);return l&&l[1]?new _e(n,i,u,l[1]):new Oe(n,i,u)}function xe(t){for(var e=0,n=X.length;e<n;e++){var s=X[e],a=s[0],i=s[1],u=i.exec(t);if(u)return a}return null}function De(){var t=typeof process<"u"&&process.version;return t?new Re(process.version.slice(1)):null}function Me(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var h={};Object.defineProperty(h,"__esModule",{value:!0});var Le=h.getLocalStorage=et=h.getLocalStorageOrThrow=Ye=h.getCrypto=Ke=h.getCryptoOrThrow=Ge=h.getLocation=qe=h.getLocationOrThrow=Je=h.getNavigator=$e=h.getNavigatorOrThrow=je=h.getDocument=We=h.getDocumentOrThrow=Ne=h.getFromWindowOrThrow=Ie=h.getFromWindow=void 0;function S(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var Ie=h.getFromWindow=S;function B(t){const e=S(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var Ne=h.getFromWindowOrThrow=B;function Fe(){return B("document")}var We=h.getDocumentOrThrow=Fe;function Ue(){return S("document")}var je=h.getDocument=Ue;function ke(){return B("navigator")}var $e=h.getNavigatorOrThrow=ke;function He(){return S("navigator")}var Je=h.getNavigator=He;function Ve(){return B("location")}var qe=h.getLocationOrThrow=Ve;function Xe(){return S("location")}var Ge=h.getLocation=Xe;function ze(){return B("crypto")}var Ke=h.getCryptoOrThrow=ze;function Qe(){return S("crypto")}var Ye=h.getCrypto=Qe;function Ze(){return B("localStorage")}var et=h.getLocalStorageOrThrow=Ze;function tt(){return S("localStorage")}Le=h.getLocalStorage=tt;var j={};Object.defineProperty(j,"__esModule",{value:!0});var rt=j.getWindowMetadata=void 0;const z=h;function nt(){let t,e;try{t=z.getDocumentOrThrow(),e=z.getLocationOrThrow()}catch{return null}function n(){const y=t.getElementsByTagName("link"),m=[];for(let w=0;w<y.length;w++){const d=y[w],E=d.getAttribute("rel");if(E&&E.toLowerCase().indexOf("icon")>-1){const p=d.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let _=e.protocol+"//"+e.host;if(p.indexOf("/")===0)_+=p;else{const x=e.pathname.split("/");x.pop();const I=x.join("/");_+=I+"/"+p}m.push(_)}else if(p.indexOf("//")===0){const _=e.protocol+p;m.push(_)}else m.push(p)}}return m}function s(...y){const m=t.getElementsByTagName("meta");for(let w=0;w<m.length;w++){const d=m[w],E=["itemprop","property","name"].map(p=>d.getAttribute(p)).filter(p=>p?y.includes(p):!1);if(E.length&&E){const p=d.getAttribute("content");if(p)return p}}return""}function a(){let y=s("name","og:site_name","og:title","twitter:title");return y||(y=t.title),y}function i(){return s("description","og:description","twitter:description","keywords")}const u=a(),l=i(),M=e.origin,L=n();return{description:l,url:M,icons:L,name:u}}rt=j.getWindowMetadata=nt;var Nt=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ae="%[a-f0-9]{2}",K=new RegExp("("+ae+")|([^%]+?)","gi"),Q=new RegExp("("+ae+")+","gi");function W(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var n=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],W(n),W(s))}function ot(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(K)||[],n=1;n<e.length;n++)t=W(e,n).join(""),e=t.match(K)||[];return t}}function it(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Q.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{var s=ot(n[0]);s!==n[0]&&(e[n[0]]=s)}n=Q.exec(t)}e["%C2"]="\uFFFD";for(var a=Object.keys(e),i=0;i<a.length;i++){var u=a[i];t=t.replace(new RegExp(u,"g"),e[u])}return t}var Ft=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return it(t)}},Wt=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const n=t.indexOf(e);return n===-1?[t]:[t.slice(0,n),t.slice(n+e.length)]},Ut=function(t,e){for(var n={},s=Object.keys(t),a=Array.isArray(e),i=0;i<s.length;i++){var u=s[i],l=t[u];(a?e.indexOf(u)!==-1:e(u,l,t))&&(n[u]=l)}return n};const st=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),at=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(s,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function ct(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return at(t)}catch{return t}}function Y(t){return typeof t=="string"?t:st(t)||""}const ut="PARSE_ERROR",ft="INVALID_REQUEST",ht="METHOD_NOT_FOUND",dt="INVALID_PARAMS",ce="INTERNAL_ERROR",k="SERVER_ERROR",lt=[-32700,-32600,-32601,-32602,-32603],C={[ut]:{code:-32700,message:"Parse error"},[ft]:{code:-32600,message:"Invalid Request"},[ht]:{code:-32601,message:"Method not found"},[dt]:{code:-32602,message:"Invalid params"},[ce]:{code:-32603,message:"Internal error"},[k]:{code:-32e3,message:"Server error"}},ue=k;function pt(t){return lt.includes(t)}function Z(t){return Object.keys(C).includes(t)?C[t]:C[ue]}function gt(t){const e=Object.values(C).find(n=>n.code===t);return e||C[ue]}function yt(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var vt={},O={},ee;function wt(){if(ee)return O;ee=1,Object.defineProperty(O,"__esModule",{value:!0}),O.isBrowserCryptoAvailable=O.getSubtleCrypto=O.getBrowerCrypto=void 0;function t(){return(A===null||A===void 0?void 0:A.crypto)||(A===null||A===void 0?void 0:A.msCrypto)||{}}O.getBrowerCrypto=t;function e(){const s=t();return s.subtle||s.webkitSubtle}O.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return O.isBrowserCryptoAvailable=n,O}var R={},te;function mt(){if(te)return R;te=1,Object.defineProperty(R,"__esModule",{value:!0}),R.isBrowser=R.isNode=R.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}R.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}R.isNode=e;function n(){return!t()&&!e()}return R.isBrowser=n,R}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=be.exports;e.__exportStar(wt(),t),e.__exportStar(mt(),t)})(vt);function fe(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function bt(t=6){return BigInt(fe(t))}function Et(t,e,n){return{id:n||fe(),jsonrpc:"2.0",method:t,params:e}}function jt(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Ot(t,e,n){return{id:t,jsonrpc:"2.0",error:Rt(e,n)}}function Rt(t,e){return typeof t>"u"?Z(ce):(typeof t=="string"&&(t=Object.assign(Object.assign({},Z(k)),{message:t})),typeof e<"u"&&(t.data=e),pt(t.code)&&(t=gt(t.code)),t)}class he{}class kt extends he{constructor(e){super()}}class _t extends he{constructor(){super()}}class Tt extends _t{constructor(e){super()}}const At="^https?:",St="^wss?:";function Bt(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function de(t,e){const n=Bt(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function re(t){return de(t,At)}function $t(t){return de(t,St)}function Ht(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function le(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Jt(t){return le(t)&&"method"in t}function Pt(t){return le(t)&&(Ct(t)||pe(t))}function Ct(t){return"result"in t}function pe(t){return"error"in t}class Vt extends Tt{constructor(e){super(e),this.events=new se.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Et(e.method,e.params||[],e.id||bt().toString()),n)}async requestStrict(e,n){return new Promise(async(s,a)=>{if(!this.connection.connected)try{await this.open()}catch(i){a(i)}this.events.on(`${e.id}`,i=>{pe(i)?a(i.error):s(i.result)});try{await this.connection.send(e,n)}catch(i){a(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Pt(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var U={exports:{}};(function(t,e){var n=typeof self<"u"?self:A,s=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(u){var l={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function M(r){return r&&DataView.prototype.isPrototypeOf(r)}if(l.arrayBuffer)var L=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],$=ArrayBuffer.isView||function(r){return r&&L.indexOf(Object.prototype.toString.call(r))>-1};function y(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(r))throw new TypeError("Invalid character in header field name");return r.toLowerCase()}function m(r){return typeof r!="string"&&(r=String(r)),r}function w(r){var o={next:function(){var c=r.shift();return{done:c===void 0,value:c}}};return l.iterable&&(o[Symbol.iterator]=function(){return o}),o}function d(r){this.map={},r instanceof d?r.forEach(function(o,c){this.append(c,o)},this):Array.isArray(r)?r.forEach(function(o){this.append(o[0],o[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(o){this.append(o,r[o])},this)}d.prototype.append=function(r,o){r=y(r),o=m(o);var c=this.map[r];this.map[r]=c?c+", "+o:o},d.prototype.delete=function(r){delete this.map[y(r)]},d.prototype.get=function(r){return r=y(r),this.has(r)?this.map[r]:null},d.prototype.has=function(r){return this.map.hasOwnProperty(y(r))},d.prototype.set=function(r,o){this.map[y(r)]=m(o)},d.prototype.forEach=function(r,o){for(var c in this.map)this.map.hasOwnProperty(c)&&r.call(o,this.map[c],c,this)},d.prototype.keys=function(){var r=[];return this.forEach(function(o,c){r.push(c)}),w(r)},d.prototype.values=function(){var r=[];return this.forEach(function(o){r.push(o)}),w(r)},d.prototype.entries=function(){var r=[];return this.forEach(function(o,c){r.push([c,o])}),w(r)},l.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function E(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function p(r){return new Promise(function(o,c){r.onload=function(){o(r.result)},r.onerror=function(){c(r.error)}})}function _(r){var o=new FileReader,c=p(o);return o.readAsArrayBuffer(r),c}function x(r){var o=new FileReader,c=p(o);return o.readAsText(r),c}function I(r){for(var o=new Uint8Array(r),c=new Array(o.length),v=0;v<o.length;v++)c[v]=String.fromCharCode(o[v]);return c.join("")}function H(r){if(r.slice)return r.slice(0);var o=new Uint8Array(r.byteLength);return o.set(new Uint8Array(r)),o.buffer}function J(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:l.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:l.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():l.arrayBuffer&&l.blob&&M(r)?(this._bodyArrayBuffer=H(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||$(r))?this._bodyArrayBuffer=H(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var r=E(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?E(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var r=E(this);if(r)return r;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(ve)}),this.json=function(){return this.text().then(JSON.parse)},this}var ge=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ye(r){var o=r.toUpperCase();return ge.indexOf(o)>-1?o:r}function T(r,o){o=o||{};var c=o.body;if(r instanceof T){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,o.headers||(this.headers=new d(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!c&&r._bodyInit!=null&&(c=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=o.credentials||this.credentials||"same-origin",(o.headers||!this.headers)&&(this.headers=new d(o.headers)),this.method=ye(o.method||this.method||"GET"),this.mode=o.mode||this.mode||null,this.signal=o.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function ve(r){var o=new FormData;return r.trim().split("&").forEach(function(c){if(c){var v=c.split("="),g=v.shift().replace(/\+/g," "),f=v.join("=").replace(/\+/g," ");o.append(decodeURIComponent(g),decodeURIComponent(f))}}),o}function we(r){var o=new d,c=r.replace(/\r?\n[\t ]+/g," ");return c.split(/\r?\n/).forEach(function(v){var g=v.split(":"),f=g.shift().trim();if(f){var D=g.join(":").trim();o.append(f,D)}}),o}J.call(T.prototype);function b(r,o){o||(o={}),this.type="default",this.status=o.status===void 0?200:o.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in o?o.statusText:"OK",this.headers=new d(o.headers),this.url=o.url||"",this._initBody(r)}J.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},b.error=function(){var r=new b(null,{status:0,statusText:""});return r.type="error",r};var me=[301,302,303,307,308];b.redirect=function(r,o){if(me.indexOf(o)===-1)throw new RangeError("Invalid status code");return new b(null,{status:o,headers:{location:r}})},u.DOMException=i.DOMException;try{new u.DOMException}catch{u.DOMException=function(o,c){this.message=o,this.name=c;var v=Error(o);this.stack=v.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function N(r,o){return new Promise(function(c,v){var g=new T(r,o);if(g.signal&&g.signal.aborted)return v(new u.DOMException("Aborted","AbortError"));var f=new XMLHttpRequest;function D(){f.abort()}f.onload=function(){var P={status:f.status,statusText:f.statusText,headers:we(f.getAllResponseHeaders()||"")};P.url="responseURL"in f?f.responseURL:P.headers.get("X-Request-URL");var F="response"in f?f.response:f.responseText;c(new b(F,P))},f.onerror=function(){v(new TypeError("Network request failed"))},f.ontimeout=function(){v(new TypeError("Network request failed"))},f.onabort=function(){v(new u.DOMException("Aborted","AbortError"))},f.open(g.method,g.url,!0),g.credentials==="include"?f.withCredentials=!0:g.credentials==="omit"&&(f.withCredentials=!1),"responseType"in f&&l.blob&&(f.responseType="blob"),g.headers.forEach(function(P,F){f.setRequestHeader(F,P)}),g.signal&&(g.signal.addEventListener("abort",D),f.onreadystatechange=function(){f.readyState===4&&g.signal.removeEventListener("abort",D)}),f.send(typeof g._bodyInit>"u"?null:g._bodyInit)})}return N.polyfill=!0,i.fetch||(i.fetch=N,i.Headers=d,i.Request=T,i.Response=b),u.Headers=d,u.Request=T,u.Response=b,u.fetch=N,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var a=s;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(U,U.exports);const ne=Ee(U.exports),xt={Accept:"application/json","Content-Type":"application/json"},Dt="POST",oe={headers:xt,method:Dt},ie=10;class qt{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new se.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!re(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,n){this.isAvailable||await this.register();try{const s=Y(e),i=await(await ne(this.url,Object.assign(Object.assign({},oe),{body:s}))).json();this.onPayload({data:i})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!re(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,a)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),a(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Y({id:1,jsonrpc:"2.0",method:"test",params:[]});await ne(e,Object.assign(Object.assign({},oe),{body:n}))}this.onOpen()}catch(n){const s=this.parseError(n);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ct(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const s=this.parseError(n),a=s.message||s.toString(),i=Ot(e,a);this.events.emit("payload",i)}parseError(e,n=this.url){return yt(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>ie&&this.events.setMaxListeners(ie)}}export{$e as A,qe as B,Ke as C,Ye as D,et as E,fe as F,qt as H,kt as I,Vt as J,Nt as a,Je as b,It as c,Ft as d,Ge as e,Ut as f,rt as g,je as h,Y as i,$t as j,vt as k,Ht as l,ct as m,Ot as n,Jt as o,yt as p,jt as q,Ct as r,Wt as s,pe as t,Pt as u,Et as v,Le as w,Ie as x,Ne as y,We as z};
